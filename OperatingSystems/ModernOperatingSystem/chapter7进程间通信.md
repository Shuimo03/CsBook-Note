## 进程间通信

进程间通信是多线程协作的基础，多线程协作带来的好处有三点：

+ 将功能模块化，避免重复造轮子。
+ 增强模块间隔离，提供更强的安全保障。
+ 提高应用的容错能力

### 进程通信(IPC)设计

一般来说IPC至少需要两个进程参与，根据信息流动的方向，这两个方向通常被称为发送者和接收者。在实际使用中，IPC经常被用于服务调用，所以参与IPC的两方又被称为调用者和被调用者。

### 数据传递

进程通信的一个重要功能是在进程间传递数据，消息传递是IPC中常用的数据传递方式，将数据抽象成一个个消息进行传递，不同的IPC设计有不同的消息抽象，消息传递的基本接口包括以下几种：

+ 发送消息: Send(message)
+ 接收消息: Recv(message)
+ 远程过程调用: RPC
+ 回复消息

## 通信模型

+ 单向
+ 双向
+ 异步
+ 同步

### 基于消息传递的通信模型

### 基于共享内存的消息传递

### 同步IPC

是指IPC操作会阻塞进程直到该操作完成。

### 异步IPC

异步IPC通常是非阻塞的，进程只需要发起一次操作就可以返回，而不需要等待其他完成。

### 超时机制

### 通信连接管理

## 宏内核进程间通信

+ 管道
  + 匿名管道
  + 命令管道
+ 消息队列
+ 信号量
+ 共享内存
+ Linux信号机制
+ 套接字机制

### 消息传递

+ 长消息
+ 短消息

L4长消息的传输本质是由内核辅助的，通常需要两次拷贝，从发送者用户态拷贝到内核缓冲区，L4为长消息传输优化了两点：

+ 拷贝次数
+ 接口层面上

## 线程池模型



## 思考

+ 进程间通信有哪些设计选择？
+ 在进程间通信过程中，数据和控制流分别是如何传输和转移的？
+ 进程间通信的连接时如何建立的？
+ 什么是超时机制？为什么进程间通信需要引入超时机制？
+ 一个进程如何找到另外一个进程提供的服务？
+ 通信带宽和时延表现如何？如何能够优化带宽和时延？
+ 消息数据段设置过长会带来内存浪费空间问题，过短则会导致频繁多次的拆分和通信，如何解决这个问题？
+ 对消息的轮询会导致CPU资源的大量浪费，这样的开销在通信不频繁的场景下格外突出，是否有更高效的通知方式？
+ 在微内核下，进程间通信的各种优化方案的核心目的是什么？
+ 在微内核下，如何优化通信的数据传输？
+ 在微内核下，如何优化通信的控制流转移？

