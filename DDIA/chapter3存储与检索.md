## 存储与检索

一个数据库在最基础的层次上需要完成两件事情：存数据与取数据。这里简单举个例子，是西安一个最简单的”数据库“，可以通过一个记事本来实现。

### 数据库的检索算法

### 数据库的索引结构

+ 哈希索引

### 日志

### 并发控制

### SSTables

+ 合并段时简单而高效的。
+ 在文件中查找一个特定的键，不需要保存内存中所有键的索引

### LSM树

### B树

B树的基本底层写操作是用新数据覆盖磁盘上的页面，为了让数据库对崩溃具有韧性，B树的实现通常会带有一个额外的磁盘数据结构：预写式日志。

### 内存锁存器

### 写时复制

### 快照隔离

### 可重复读

### B+树

### 聚集索引

### 非聚集索引

### 多列索引

### 模糊索引

### 在线事务处理(OLTP)

### 在线分析处理(OLAP)

### OLTP和OLAP对比

|     属性     |        事务处理 OLTP         |      分析系统 OLAP       |
| :----------: | :--------------------------: | :----------------------: |
| 主要读取模式 |    查询少量记录，按键读取    |    在大批量记录上聚合    |
| 主要写入模式 |   随机访问，写入要求低延时   | 批量导入（ETL），事件流  |
|   主要用户   |    终端用户，通过Web应用     | 内部数据分析师，决策支持 |
|  处理的数据  | 数据的最新状态（当前时间点） |   随时间推移的历史事件   |
|  数据集尺寸  |           GB ~ TB            |         TB ~ PB          |

### 列存储



## 扩展内容

+ LevelDB
+ RocksDB
+ LMDB
+ 布隆过滤器